= Create and use Models
:last_updated: 2/2/2024
:linkattrs:
:experimental:
:page-layout: default-cloud-early-access
:description: Data models are logical views created on top of a more complex data model, to enable business users to more easily consume data.
:model: Model
:jira: SCAL-158357

ThoughtSpot uses Models, which are logical views of data, to model complex datasets. These data models simplify access to data for end-users and application services by incorporating these key features, and more:

* *Table joins* supplement the primary data with information from various other data sources.
* *Changing data types* ensures that you can handle mismatches gracefully, For example, conversions of date/time type formats, and processing of numeric codes (such as event IDs) correctly.
* *Derived fields* support flexible expressions and formulas.
* *Renamed fields* make charts and tables easily accessible.
* *Selecting fields* allows you to focus only on the  fields that are necessary to the business use case.
* *Hiding fields* lets you change the visibility of data by obscuring and securing sensitive information without affecting the calculations that depend on it.
+
NOTE: If a hidden column is used in an Answer pinned to a Liveboard, then the entire Liveboard becomes read-only to users. This limits Liveboard functionality, which means the ability to adjust filters and download data is restricted.
* *Changing the default aggregation* of fields in a {model} prevents common mistakes when building visuals.


After xref:data-modeling.adoc[modeling your data], create {model}s to make searching easier.
For example, a sales executive might need to search for information about retail sales.
This data might be contained in several tables (sales, customers, products, stores, etc.), with foreign key relationships between them.
An administrator who is familiar with the data model can create a retail sales {model}, that combines all of the related fact and dimension tables into a single, easy-to-use view, and share it with the sales executive.
This provides access to the data without requiring an understanding of how it is structured.

== Guidelines for {model}s

TBD

[#create-worksheet]
== Creating a {model}

To create a data model:

. Select *Data*, on the top navigation bar.
. Select the *+ Create new* button in the side navigation bar.
. Select *Model*.
. Choose how you want to model your data, using one of the following options:
.. To create your own model, select *Build your own with cloud data*.
... To create a new connection, refer to xref:connections.adoc[About connections]
... To use an existing connection, select it from the list, and click *Connect*.
.. To use an existing model in dbt, select *dbt*
... To create a new dbt connection, click *Add dbt connection* and refer to step 5 of xref:dbt-integration#integrate[Integrating with dbt].
... To use an existing connection, select it from the list, and click *Connect*.
.. To import the TML for a model, select *TML*, and upload your tml files. For more information, refer to xref:tml-worksheets[TML for Worksheets].
.. To use an existing SpotApp as a model, select *SpotApps*, and select a SpotApp.

. <<build-model,Build your data model>>.

[#build-model]
== Build your {model}

After creating your {model}, you need to add the sources that contain the data.
A source is another name for a table. You do that using the {model} editor.

image::model_empty.png[]

The sources you choose are typically related to one another by foreign keys.

The first step to building your {model}, is to add tables.

=== Adding tables

To add tables to your {model}, do the following:

. Drag tables from the list on the left, and drop them into the right pane.
+
image::model_tables.png[]
+
If joins were already created between the tables you added, you'll see a line connecting the tables.
+
Example:
+
image::model_suggest_join.png[]
+
This is an example of a join suggestion, which you can choose to accept, edit, or clear.

. (Optional) If there is a suggested join, click the join icon image:model_join_icon.png[] and do one of the following:

- To accept the join, select *Accept Join*.
- To edit the join, select *Edit Join*.
- To clear the join, select *Clear Join*.
+
NOTE: The appearance of the join icon will vary depending on the type of join.

. To add a new join between tables, click the More menu image:model_table_join_more.png[] in the upper right of a table, and select *Add Join*.
. In the _Create Join_ window for _Table 2_, select the table you want to join to the first table (_Table 1_).
. For _Column from Table 1_, select the column you want to join to another column in _Table 2_.
. For _Column from Table 2_, select the column in _Table 2_ which you want to join to the selected column in _Table 1_.
. For _Join Type_, select a join type. Options include:
- INNER image:model_join_icon.png[]
- FULL OUTER image:model_join_full_outer_icon.png[]
- LEFT OUTER image:model_join_suggestion_icon.png[]
- RIGHT OUTER image:model_join_right_outer_icon.png[]
. For _Cardinality_, select the cardinality. Options include:
- Many:1
- 1:Many
- 1:1
. Click *Save*.
+
The join is created.
+
image::model_tables_joined.png[]

. Add additional tables and joins, as needed.
. (Recommended) Name your {model} by clicking *Add name* and entering a name.
. (Optional) Add a description of your {model} by clicking *Add description* and entering a description.
. When you are finished adding tables and joins to your {model}, the next step is to add columns.

=== Adding columns

To add columns to your {model}, do the following:

. Click the *Columns* tab.
+
image::model_columns.png[]
+
Table names are highlighted in blue, and their associated columns appear underneath them.

. Add columns by doing either of the following:
- To add all the columns from a table, drag the table name from the list on the left and drop it into the right pane.
- To add an individual column from a table, drag the column name from the list on the left and drop it into the right pane.

+
image::model_columns_added.png[]

. (Optional) Edit column properties, as needed.
. To save the columns in your {model}, click *Save changes*.
+
You are prompted to edit the title and description of your {model}.
. Edit the title and description if needed.
. Click *Save*.
+
Your model is saved, and you have the option to add formulas, filters, parameter, and adjust settings.
. If you don't want to do those things now, click *Exit data model*.



[#role-playing-dimensions]
== Role-playing dimensions

A role-playing dimension is when a single physical dimension is referenced multiple times in a fact table, with each reference linking to a logically distinct role for the dimension. ThoughtSpot supports role-playing dimensions, or multiple join paths, for {model}s. For example, you may have a fact table joined to a dimension table more than once. This is useful for cases such as when you have a sales fact table and an employee dimension table, where the sales table may record the employee ID who created, updated, and owned a record. In this case, you would want to join these three columns to the employee dimension table on employee ID.

When adding attribute columns from that dimension table to your {model}, ThoughtSpot prompts you to choose which join path you would like to use for that column. To use role-playing dimensions, select that attribute again, modify the name, and choose the other join path when ThoughtSpot prompts you to select one. For more information, see link:https://community.thoughtspot.com/customers/s/article/How-do-you-model-role-playing-dimensions[Model role-playing dimensions].

== Where to go next

* *xref:worksheet-progressive-joins.adoc[How the Model join rule works]* +
Use the {model} join rule to specify when to apply joins when a search is done on a {model}.
You can either apply joins progressively, as each search term is added (recommended), or apply all joins to every search.

'''
> **Related information**
>
> * xref:worksheet-edit.adoc[Edit a Worksheet]
> * xref:worksheet-formula.adoc[Create a formula in a Worksheet]
> * xref:worksheet-filter.adoc[Create a Worksheet filter]
> * xref:worksheet-progressive-joins.adoc[How the Worksheet join rule works]
> * xref:worksheet-inclusion.adoc[Create join rule or RLS for a Worksheet]
> * xref:join-add.adoc[Create a join relationship]
> * xref:join-worksheet-edit.adoc[Modify joins between Worksheet tables]
> * xref:worksheet-delete.adoc[Delete Worksheets or tables]
> * xref:scriptability.adoc[Migrate or restore Worksheets]
> * xref:tml-worksheets.adoc[Worksheet TML specification]
